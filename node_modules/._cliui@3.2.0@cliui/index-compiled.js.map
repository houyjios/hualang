{"version":3,"sources":["../sass-graph/node_modules/yargs/node_modules/cliui/index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var stringWidth = require('string-width')\nvar stripAnsi = require('strip-ansi')\nvar wrap = require('wrap-ansi')\nvar align = {\n  right: alignRight,\n  center: alignCenter\n}\nvar top = 0\nvar right = 1\nvar bottom = 2\nvar left = 3\n\nfunction UI (opts) {\n  this.width = opts.width\n  this.wrap = opts.wrap\n  this.rows = []\n}\n\nUI.prototype.span = function () {\n  var cols = this.div.apply(this, arguments)\n  cols.span = true\n}\n\nUI.prototype.div = function () {\n  if (arguments.length === 0) this.div('')\n  if (this.wrap && this._shouldApplyLayoutDSL.apply(this, arguments)) {\n    return this._applyLayoutDSL(arguments[0])\n  }\n\n  var cols = []\n\n  for (var i = 0, arg; (arg = arguments[i]) !== undefined; i++) {\n    if (typeof arg === 'string') cols.push(this._colFromString(arg))\n    else cols.push(arg)\n  }\n\n  this.rows.push(cols)\n  return cols\n}\n\nUI.prototype._shouldApplyLayoutDSL = function () {\n  return arguments.length === 1 && typeof arguments[0] === 'string' &&\n    /[\\t\\n]/.test(arguments[0])\n}\n\nUI.prototype._applyLayoutDSL = function (str) {\n  var _this = this\n  var rows = str.split('\\n')\n  var leftColumnWidth = 0\n\n  // simple heuristic for layout, make sure the\n  // second column lines up along the left-hand.\n  // don't allow the first column to take up more\n  // than 50% of the screen.\n  rows.forEach(function (row) {\n    var columns = row.split('\\t')\n    if (columns.length > 1 && stringWidth(columns[0]) > leftColumnWidth) {\n      leftColumnWidth = Math.min(\n        Math.floor(_this.width * 0.5),\n        stringWidth(columns[0])\n      )\n    }\n  })\n\n  // generate a table:\n  //  replacing ' ' with padding calculations.\n  //  using the algorithmically generated width.\n  rows.forEach(function (row) {\n    var columns = row.split('\\t')\n    _this.div.apply(_this, columns.map(function (r, i) {\n      return {\n        text: r.trim(),\n        padding: _this._measurePadding(r),\n        width: (i === 0 && columns.length > 1) ? leftColumnWidth : undefined\n      }\n    }))\n  })\n\n  return this.rows[this.rows.length - 1]\n}\n\nUI.prototype._colFromString = function (str) {\n  return {\n    text: str,\n    padding: this._measurePadding(str)\n  }\n}\n\nUI.prototype._measurePadding = function (str) {\n  // measure padding without ansi escape codes\n  var noAnsi = stripAnsi(str)\n  return [0, noAnsi.match(/\\s*$/)[0].length, 0, noAnsi.match(/^\\s*/)[0].length]\n}\n\nUI.prototype.toString = function () {\n  var _this = this\n  var lines = []\n\n  _this.rows.forEach(function (row, i) {\n    _this.rowToString(row, lines)\n  })\n\n  // don't display any lines with the\n  // hidden flag set.\n  lines = lines.filter(function (line) {\n    return !line.hidden\n  })\n\n  return lines.map(function (line) {\n    return line.text\n  }).join('\\n')\n}\n\nUI.prototype.rowToString = function (row, lines) {\n  var _this = this\n  var padding\n  var rrows = this._rasterize(row)\n  var str = ''\n  var ts\n  var width\n  var wrapWidth\n\n  rrows.forEach(function (rrow, r) {\n    str = ''\n    rrow.forEach(function (col, c) {\n      ts = '' // temporary string used during alignment/padding.\n      width = row[c].width // the width with padding.\n      wrapWidth = _this._negatePadding(row[c]) // the width without padding.\n\n      ts += col\n\n      for (var i = 0; i < wrapWidth - stringWidth(col); i++) {\n        ts += ' '\n      }\n\n      // align the string within its column.\n      if (row[c].align && row[c].align !== 'left' && _this.wrap) {\n        ts = align[row[c].align](ts, wrapWidth)\n        if (stringWidth(ts) < wrapWidth) ts += new Array(width - stringWidth(ts)).join(' ')\n      }\n\n      // apply border and padding to string.\n      padding = row[c].padding || [0, 0, 0, 0]\n      if (padding[left]) str += new Array(padding[left] + 1).join(' ')\n      str += addBorder(row[c], ts, '| ')\n      str += ts\n      str += addBorder(row[c], ts, ' |')\n      if (padding[right]) str += new Array(padding[right] + 1).join(' ')\n\n      // if prior row is span, try to render the\n      // current row on the prior line.\n      if (r === 0 && lines.length > 0) {\n        str = _this._renderInline(str, lines[lines.length - 1])\n      }\n    })\n\n    // remove trailing whitespace.\n    lines.push({\n      text: str.replace(/ +$/, ''),\n      span: row.span\n    })\n  })\n\n  return lines\n}\n\nfunction addBorder (col, ts, style) {\n  if (col.border) {\n    if (/[.']-+[.']/.test(ts)) return ''\n    else if (ts.trim().length) return style\n    else return '  '\n  }\n  return ''\n}\n\n// if the full 'source' can render in\n// the target line, do so.\nUI.prototype._renderInline = function (source, previousLine) {\n  var leadingWhitespace = source.match(/^ */)[0].length\n  var target = previousLine.text\n  var targetTextWidth = stringWidth(target.trimRight())\n\n  if (!previousLine.span) return source\n\n  // if we're not applying wrapping logic,\n  // just always append to the span.\n  if (!this.wrap) {\n    previousLine.hidden = true\n    return target + source\n  }\n\n  if (leadingWhitespace < targetTextWidth) return source\n\n  previousLine.hidden = true\n\n  return target.trimRight() + new Array(leadingWhitespace - targetTextWidth + 1).join(' ') + source.trimLeft()\n}\n\nUI.prototype._rasterize = function (row) {\n  var _this = this\n  var i\n  var rrow\n  var rrows = []\n  var widths = this._columnWidths(row)\n  var wrapped\n\n  // word wrap all columns, and create\n  // a data-structure that is easy to rasterize.\n  row.forEach(function (col, c) {\n    // leave room for left and right padding.\n    col.width = widths[c]\n    if (_this.wrap) wrapped = wrap(col.text, _this._negatePadding(col), {hard: true}).split('\\n')\n    else wrapped = col.text.split('\\n')\n\n    if (col.border) {\n      wrapped.unshift('.' + new Array(_this._negatePadding(col) + 3).join('-') + '.')\n      wrapped.push(\"'\" + new Array(_this._negatePadding(col) + 3).join('-') + \"'\")\n    }\n\n    // add top and bottom padding.\n    if (col.padding) {\n      for (i = 0; i < (col.padding[top] || 0); i++) wrapped.unshift('')\n      for (i = 0; i < (col.padding[bottom] || 0); i++) wrapped.push('')\n    }\n\n    wrapped.forEach(function (str, r) {\n      if (!rrows[r]) rrows.push([])\n\n      rrow = rrows[r]\n\n      for (var i = 0; i < c; i++) {\n        if (rrow[i] === undefined) rrow.push('')\n      }\n      rrow.push(str)\n    })\n  })\n\n  return rrows\n}\n\nUI.prototype._negatePadding = function (col) {\n  var wrapWidth = col.width\n  if (col.padding) wrapWidth -= (col.padding[left] || 0) + (col.padding[right] || 0)\n  if (col.border) wrapWidth -= 4\n  return wrapWidth\n}\n\nUI.prototype._columnWidths = function (row) {\n  var _this = this\n  var widths = []\n  var unset = row.length\n  var unsetWidth\n  var remainingWidth = this.width\n\n  // column widths can be set in config.\n  row.forEach(function (col, i) {\n    if (col.width) {\n      unset--\n      widths[i] = col.width\n      remainingWidth -= col.width\n    } else {\n      widths[i] = undefined\n    }\n  })\n\n  // any unset widths should be calculated.\n  if (unset) unsetWidth = Math.floor(remainingWidth / unset)\n  widths.forEach(function (w, i) {\n    if (!_this.wrap) widths[i] = row[i].width || stringWidth(row[i].text)\n    else if (w === undefined) widths[i] = Math.max(unsetWidth, _minWidth(row[i]))\n  })\n\n  return widths\n}\n\n// calculates the minimum width of\n// a column, based on padding preferences.\nfunction _minWidth (col) {\n  var padding = col.padding || []\n  var minWidth = 1 + (padding[left] || 0) + (padding[right] || 0)\n  if (col.border) minWidth += 4\n  return minWidth\n}\n\nfunction alignRight (str, width) {\n  str = str.trim()\n  var padding = ''\n  var strWidth = stringWidth(str)\n\n  if (strWidth < width) {\n    padding = new Array(width - strWidth + 1).join(' ')\n  }\n\n  return padding + str\n}\n\nfunction alignCenter (str, width) {\n  str = str.trim()\n  var padding = ''\n  var strWidth = stringWidth(str.trim())\n\n  if (strWidth < width) {\n    padding = new Array(parseInt((width - strWidth) / 2, 10) + 1).join(' ')\n  }\n\n  return padding + str\n}\n\nmodule.exports = function (opts) {\n  opts = opts || {}\n\n  return new UI({\n    width: (opts || {}).width || 80,\n    wrap: typeof opts.wrap === 'boolean' ? opts.wrap : true\n  })\n}\n"]}