{"version":3,"sources":["../../sass-graph/node_modules/yargs/lib/validation.js"],"names":[],"mappings":"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","file":"validation-compiled.js","sourcesContent":["const objFilter = require('./obj-filter')\n\n// validation-type-stuff, missing params,\n// bad implications, custom checks.\nmodule.exports = function (yargs, usage, y18n) {\n  const __ = y18n.__\n  const __n = y18n.__n\n  const self = {}\n\n  // validate appropriate # of non-option\n  // arguments were provided, i.e., '_'.\n  self.nonOptionCount = function (argv) {\n    const demandedCommands = yargs.getDemandedCommands()\n    // don't count currently executing commands\n    const _s = argv._.length - yargs.getContext().commands.length\n\n    if (demandedCommands._ && (_s < demandedCommands._.min || _s > demandedCommands._.max)) {\n      if (_s < demandedCommands._.min) {\n        if (demandedCommands._.minMsg !== undefined) {\n          usage.fail(\n            // replace $0 with observed, $1 with expected.\n            demandedCommands._.minMsg ? demandedCommands._.minMsg.replace(/\\$0/g, _s).replace(/\\$1/, demandedCommands._.min) : null\n          )\n        } else {\n          usage.fail(\n            __('Not enough non-option arguments: got %s, need at least %s', _s, demandedCommands._.min)\n          )\n        }\n      } else if (_s > demandedCommands._.max) {\n        if (demandedCommands._.maxMsg !== undefined) {\n          usage.fail(\n            // replace $0 with observed, $1 with expected.\n            demandedCommands._.maxMsg ? demandedCommands._.maxMsg.replace(/\\$0/g, _s).replace(/\\$1/, demandedCommands._.max) : null\n          )\n        } else {\n          usage.fail(\n          __('Too many non-option arguments: got %s, maximum of %s', _s, demandedCommands._.max)\n          )\n        }\n      }\n    }\n  }\n\n  // validate the appropriate # of <required>\n  // positional arguments were provided:\n  self.positionalCount = function (required, observed) {\n    if (observed < required) {\n      usage.fail(\n        __('Not enough non-option arguments: got %s, need at least %s', observed, required)\n      )\n    }\n  }\n\n  // make sure that any args that require an\n  // value (--foo=bar), have a value.\n  self.missingArgumentValue = function (argv) {\n    const defaultValues = [true, false, '']\n    const options = yargs.getOptions()\n\n    if (options.requiresArg.length > 0) {\n      const missingRequiredArgs = []\n\n      options.requiresArg.forEach(function (key) {\n        const value = argv[key]\n\n        // if a value is explicitly requested,\n        // flag argument as missing if it does not\n        // look like foo=bar was entered.\n        if (~defaultValues.indexOf(value) ||\n          (Array.isArray(value) && !value.length)) {\n          missingRequiredArgs.push(key)\n        }\n      })\n\n      if (missingRequiredArgs.length > 0) {\n        usage.fail(__n(\n          'Missing argument value: %s',\n          'Missing argument values: %s',\n          missingRequiredArgs.length,\n          missingRequiredArgs.join(', ')\n        ))\n      }\n    }\n  }\n\n  // make sure all the required arguments are present.\n  self.requiredArguments = function (argv) {\n    const demandedOptions = yargs.getDemandedOptions()\n    var missing = null\n\n    Object.keys(demandedOptions).forEach(function (key) {\n      if (!argv.hasOwnProperty(key) || typeof argv[key] === 'undefined') {\n        missing = missing || {}\n        missing[key] = demandedOptions[key]\n      }\n    })\n\n    if (missing) {\n      const customMsgs = []\n      Object.keys(missing).forEach(function (key) {\n        const msg = missing[key]\n        if (msg && customMsgs.indexOf(msg) < 0) {\n          customMsgs.push(msg)\n        }\n      })\n\n      const customMsg = customMsgs.length ? '\\n' + customMsgs.join('\\n') : ''\n\n      usage.fail(__n(\n        'Missing required argument: %s',\n        'Missing required arguments: %s',\n        Object.keys(missing).length,\n        Object.keys(missing).join(', ') + customMsg\n      ))\n    }\n  }\n\n  // check for unknown arguments (strict-mode).\n  self.unknownArguments = function (argv, aliases, positionalMap) {\n    const aliasLookup = {}\n    const descriptions = usage.getDescriptions()\n    const demandedOptions = yargs.getDemandedOptions()\n    const commandKeys = yargs.getCommandInstance().getCommands()\n    const unknown = []\n    const currentContext = yargs.getContext()\n\n    Object.keys(aliases).forEach(function (key) {\n      aliases[key].forEach(function (alias) {\n        aliasLookup[alias] = key\n      })\n    })\n\n    Object.keys(argv).forEach(function (key) {\n      if (key !== '$0' && key !== '_' &&\n        !descriptions.hasOwnProperty(key) &&\n        !demandedOptions.hasOwnProperty(key) &&\n        !positionalMap.hasOwnProperty(key) &&\n        !yargs._getParseContext().hasOwnProperty(key) &&\n        !aliasLookup.hasOwnProperty(key)) {\n        unknown.push(key)\n      }\n    })\n\n    if (commandKeys.length > 0) {\n      argv._.slice(currentContext.commands.length).forEach(function (key) {\n        if (commandKeys.indexOf(key) === -1) {\n          unknown.push(key)\n        }\n      })\n    }\n\n    if (unknown.length > 0) {\n      usage.fail(__n(\n        'Unknown argument: %s',\n        'Unknown arguments: %s',\n        unknown.length,\n        unknown.join(', ')\n      ))\n    }\n  }\n\n  // validate arguments limited to enumerated choices\n  self.limitedChoices = function (argv) {\n    const options = yargs.getOptions()\n    const invalid = {}\n\n    if (!Object.keys(options.choices).length) return\n\n    Object.keys(argv).forEach(function (key) {\n      if (key !== '$0' && key !== '_' &&\n        options.choices.hasOwnProperty(key)) {\n        [].concat(argv[key]).forEach(function (value) {\n          // TODO case-insensitive configurability\n          if (options.choices[key].indexOf(value) === -1) {\n            invalid[key] = (invalid[key] || []).concat(value)\n          }\n        })\n      }\n    })\n\n    const invalidKeys = Object.keys(invalid)\n\n    if (!invalidKeys.length) return\n\n    var msg = __('Invalid values:')\n    invalidKeys.forEach(function (key) {\n      msg += '\\n  ' + __(\n        'Argument: %s, Given: %s, Choices: %s',\n        key,\n        usage.stringifiedValues(invalid[key]),\n        usage.stringifiedValues(options.choices[key])\n      )\n    })\n    usage.fail(msg)\n  }\n\n  // custom checks, added using the `check` option on yargs.\n  var checks = []\n  self.check = function (f, global) {\n    checks.push({\n      func: f,\n      global: global\n    })\n  }\n\n  self.customChecks = function (argv, aliases) {\n    for (var i = 0, f; (f = checks[i]) !== undefined; i++) {\n      var func = f.func\n      var result = null\n      try {\n        result = func(argv, aliases)\n      } catch (err) {\n        usage.fail(err.message ? err.message : err, err)\n        continue\n      }\n\n      if (!result) {\n        usage.fail(__('Argument check failed: %s', func.toString()))\n      } else if (typeof result === 'string' || result instanceof Error) {\n        usage.fail(result.toString(), result)\n      }\n    }\n  }\n\n  // check implications, argument foo implies => argument bar.\n  var implied = {}\n  self.implies = function (key, value) {\n    if (typeof key === 'object') {\n      Object.keys(key).forEach(function (k) {\n        self.implies(k, key[k])\n      })\n    } else {\n      yargs.global(key)\n      implied[key] = value\n    }\n  }\n  self.getImplied = function () {\n    return implied\n  }\n\n  self.implications = function (argv) {\n    const implyFail = []\n\n    Object.keys(implied).forEach(function (key) {\n      var num\n      const origKey = key\n      var value = implied[key]\n\n      // convert string '1' to number 1\n      num = Number(key)\n      key = isNaN(num) ? key : num\n\n      if (typeof key === 'number') {\n        // check length of argv._\n        key = argv._.length >= key\n      } else if (key.match(/^--no-.+/)) {\n        // check if key doesn't exist\n        key = key.match(/^--no-(.+)/)[1]\n        key = !argv[key]\n      } else {\n        // check if key exists\n        key = argv[key]\n      }\n\n      num = Number(value)\n      value = isNaN(num) ? value : num\n\n      if (typeof value === 'number') {\n        value = argv._.length >= value\n      } else if (value.match(/^--no-.+/)) {\n        value = value.match(/^--no-(.+)/)[1]\n        value = !argv[value]\n      } else {\n        value = argv[value]\n      }\n\n      if (key && !value) {\n        implyFail.push(origKey)\n      }\n    })\n\n    if (implyFail.length) {\n      var msg = __('Implications failed:') + '\\n'\n\n      implyFail.forEach(function (key) {\n        msg += ('  ' + key + ' -> ' + implied[key])\n      })\n\n      usage.fail(msg)\n    }\n  }\n\n  var conflicting = {}\n  self.conflicts = function (key, value) {\n    if (typeof key === 'object') {\n      Object.keys(key).forEach(function (k) {\n        self.conflicts(k, key[k])\n      })\n    } else {\n      yargs.global(key)\n      conflicting[key] = value\n    }\n  }\n  self.getConflicting = function () {\n    return conflicting\n  }\n\n  self.conflicting = function (argv) {\n    var args = Object.getOwnPropertyNames(argv)\n\n    args.forEach(function (arg) {\n      if (conflicting[arg] && args.indexOf(conflicting[arg]) !== -1) {\n        usage.fail(__('Arguments %s and %s are mutually exclusive', arg, conflicting[arg]))\n      }\n    })\n  }\n\n  self.recommendCommands = function (cmd, potentialCommands) {\n    const distance = require('./levenshtein')\n    const threshold = 3 // if it takes more than three edits, let's move on.\n    potentialCommands = potentialCommands.sort(function (a, b) { return b.length - a.length })\n\n    var recommended = null\n    var bestDistance = Infinity\n    for (var i = 0, candidate; (candidate = potentialCommands[i]) !== undefined; i++) {\n      var d = distance(cmd, candidate)\n      if (d <= threshold && d < bestDistance) {\n        bestDistance = d\n        recommended = candidate\n      }\n    }\n    if (recommended) usage.fail(__('Did you mean %s?', recommended))\n  }\n\n  self.reset = function (localLookup) {\n    implied = objFilter(implied, function (k, v) {\n      return !localLookup[k]\n    })\n    conflicting = objFilter(conflicting, function (k, v) {\n      return !localLookup[k]\n    })\n    checks = checks.filter(function (c) {\n      return c.global\n    })\n    return self\n  }\n\n  var frozen\n  self.freeze = function () {\n    frozen = {}\n    frozen.implied = implied\n    frozen.checks = checks\n    frozen.conflicting = conflicting\n  }\n  self.unfreeze = function () {\n    implied = frozen.implied\n    checks = frozen.checks\n    conflicting = frozen.conflicting\n    frozen = undefined\n  }\n\n  return self\n}\n"]}